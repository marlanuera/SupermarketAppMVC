<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Order Confirmation - SunnySide Market</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  body { background-color: #FFFBEA; font-family: Arial; }

  /* Navbar styling */
  nav.navbar { background-color: #2E8B57; }
  nav .navbar-brand { font-family: 'Pacifico', cursive; color: white; }
  nav .nav-link { color: white; font-weight: bold; }
  nav .nav-link:hover { background-color: #FFD54F; color: black; border-radius: 5px; }

  /* Invoice styling */
  .invoice-box { 
    background: white; 
    padding: 25px; 
    border-radius: 12px; 
    max-width: 800px; 
    margin: 40px auto; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  }
  .invoice-header { text-align: center; }
  .btn-print { background-color: #2E8B57; color: white; }
  .btn-print:hover { background-color: #256f45; }

  /* Print only the invoice */
  @media print {
    body * {
      visibility: hidden;
    }
    .invoice-box, .invoice-box * {
      visibility: visible;
    }
    .invoice-box {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      margin: 0;
      box-shadow: none;
    }
  }
</style>

<script>
function printInvoice() {
  window.print();
}
</script>
</head>

<body>
  <%- include('partials/navbar') %>

<div class="container mt-4 text-center">
  <h2 style="color:#2E8B57;">Order Confirmed!</h2>
  <p>Thank you for your purchase! Your invoice has also been sent to your email. Your order ID is <strong><%= orderId %></strong>.</p>
  <p><strong>Total Paid:</strong> $<%= total.toFixed(2) %></p>
  <a href="/shopping" class="btn btn-warning mt-2">Shopping</a>
</div>

<div class="invoice-box mt-4">
  <div class="invoice-header">
    <h2>Invoice</h2>
    <p><strong>Order ID:</strong> <%= orderId %></p>
    <p><strong>Date:</strong> <%= new Date().toLocaleString() %></p>
  </div>

  <hr>

  <h4>Order Items</h4>
  <table class="table table-bordered text-center">
    <thead>
      <tr>
        <th>Product</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      <% cart.forEach(item => { %>
        <tr>
          <td><%= item.productName %></td>
          <td><%= item.quantity %></td>
          <td>$<%= item.price.toFixed(2) %></td>
          <td>$<%= (item.price * item.quantity).toFixed(2) %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <h5 class="text-end">Total Paid: $<%= total.toFixed(2) %></h5>

  <button class="btn btn-print mt-3" onclick="printInvoice()">Print Invoice</button>
</div>

</body>
</html>


